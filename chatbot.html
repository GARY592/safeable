<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Safeable Chatbot</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background-color: #f7f9fc;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin: 0;
    }
    .chat-container {
        width: 100%;
        max-width: 500px;
        background: #fff;
        box-shadow: 0px 4px 20px rgba(0,0,0,0.1);
        border-radius: 12px;
        display: flex;
        flex-direction: column;
        overflow: hidden;
    }
    .chat-header {
        background: #0078D7;
        color: white;
        padding: 15px;
        font-size: 18px;
        text-align: center;
        font-weight: bold;
    }
    .chat-box {
        padding: 15px;
        height: 350px;
        overflow-y: auto;
        background: #f2f4f8;
    }
    .bot-message, .user-message {
        padding: 10px;
        margin: 8px 0;
        border-radius: 10px;
        max-width: 80%;
        word-wrap: break-word;
    }
    .bot-message {
        background: #e3f2fd;
        align-self: flex-start;
    }
    .user-message {
        background: #c8e6c9;
        align-self: flex-end;
    }
    .chat-input {
        display: flex;
        border-top: 1px solid #ddd;
    }
    .chat-input input {
        flex: 1;
        border: none;
        padding: 12px;
        font-size: 16px;
        outline: none;
    }
    .chat-input button {
        background: #0078D7;
        color: white;
        border: none;
        padding: 12px;
        cursor: pointer;
        font-size: 16px;
    }
    .suggestions {
        background: #f9f9f9;
        padding: 10px;
        border-top: 1px solid #ddd;
        display: flex;
        flex-wrap: wrap;
        gap: 6px;
    }
    .suggestion-btn {
        background: #e1e1e1;
        border: none;
        padding: 6px 12px;
        border-radius: 20px;
        cursor: pointer;
        font-size: 14px;
        transition: 0.3s;
    }
    .suggestion-btn:hover {
        background: #ccc;
    }
</style>
</head>
<body>

<div class="chat-container">
    <div class="chat-header">Safeable Chatbot</div>
    <div class="chat-box" id="chat-box"></div>
    
    <div class="suggestions">
        <button class="suggestion-btn" onclick="sendSuggestion('earthquake')">Earthquake</button>
        <button class="suggestion-btn" onclick="sendSuggestion('flood')">Flood</button>
        <button class="suggestion-btn" onclick="sendSuggestion('cyclone')">Cyclone</button>
        <button class="suggestion-btn" onclick="sendSuggestion('fire')">Fire</button>
        <button class="suggestion-btn" onclick="sendSuggestion('first aid')">First Aid</button>
        <button class="suggestion-btn" onclick="sendSuggestion('help')">Help</button>
        <button class="suggestion-btn" onclick="sendSuggestion('hi')">Hi</button>
    </div>
    
    <div class="chat-input">
        <input type="text" id="user-input" placeholder="Type a message...">
        <button onclick="sendMessage()">Send</button>
        <button onclick="startVoiceRecognition()">ðŸŽ¤</button>
    </div>
</div>

<script>
const chatBox = document.getElementById('chat-box');

function appendMessage(message, sender) {
    const messageElement = document.createElement('div');
    messageElement.classList.add(sender === 'bot' ? 'bot-message' : 'user-message');
    messageElement.textContent = message;
    chatBox.appendChild(messageElement);
    chatBox.scrollTop = chatBox.scrollHeight;
}

function speakMessage(message) {
    const utterance = new SpeechSynthesisUtterance(message);
    utterance.lang = 'en-US';
    speechSynthesis.speak(utterance);
}

function getBotResponse(userText) {
    const text = userText.toLowerCase();
    let response = "Sorry, I didnâ€™t understand that.";

    if (text.includes("hi")) {
        response = "Hello! How can I assist you today?";
    } else if (text.includes("help")) {
        response = "I can assist you with safety tips for disasters like earthquakes, floods, cyclones, and fires. You can also ask about first aid.";
    } else if (text.includes("first aid")) {
        response = "For basic first aid: Check responsiveness, call emergency services, stop bleeding, keep the injured person comfortable, and monitor breathing.";
    } else if (text.includes("earthquake")) {
        response = "During an earthquake: Drop, cover, and hold on. Stay indoors until the shaking stops.";
    } else if (text.includes("flood")) {
        response = "In case of a flood: Move to higher ground, avoid walking/driving through floodwaters, and listen to emergency alerts.";
    } else if (text.includes("cyclone")) {
        response = "For cyclones: Stay indoors, secure windows and doors, and keep an emergency kit ready.";
    } else if (text.includes("fire")) {
        response = "If thereâ€™s a fire: Evacuate immediately, stay low to avoid smoke, and call emergency services.";
    }

    return response;
}

function sendMessage() {
    const userInput = document.getElementById('user-input');
    const userText = userInput.value.trim();
    if (userText === "") return;

    appendMessage(userText, 'user');
    userInput.value = "";

    const botResponse = getBotResponse(userText);
    appendMessage(botResponse, 'bot');
    speakMessage(botResponse);
}

function sendSuggestion(text) {
    document.getElementById('user-input').value = text;
    sendMessage();
}

function startVoiceRecognition() {
    const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
    recognition.lang = "en-US";
    recognition.start();

    recognition.onresult = function(event) {
        const transcript = event.results[0][0].transcript;
        appendMessage(transcript, 'user');
        const botResponse = getBotResponse(transcript);
        appendMessage(botResponse, 'bot');
        speakMessage(botResponse);
    };
}
</script>

</body>
</html>
